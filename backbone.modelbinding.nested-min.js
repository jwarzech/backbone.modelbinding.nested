/*
//  Backbone.ModelBinding.Nested 0.2.0
//  
//  (c) 2012 Jordan Warzecha
//  Distributed under the MIT license.
//
//  Documentation and full license available at:
//  http://github.com/jwarzech/backbone.modelbinding.nested
*/
var _this=this;Backbone.Model.prototype.setByName=function(b,c,a){var d;d={};d[b]=c;return this.set(d,a)};Backbone.Model.prototype.bindingId=function(){if(this.id!=null){return this.id}else{return this.cid}};Backbone.Collection.prototype.isCollection=function(){return true};Backbone.Collection.prototype.safeGet=function(a){if(this.get(a)!=null){return this.get(a)}else{return this.getByCid(a)}};Backbone.Model.prototype.buildCollection=function(a,b){if(this.has(a)&&this.get(a).length>0){this.setByName(a,new b(this.get(a)))}else{this.setByName(a,new b())}return this.get(a).parent=this};Backbone.Model.prototype.safeGet=function(a){return this.get(a)};Backbone.ModelBinding.parseNestedTokens=function(b,d){var c,e,a;e=d.shift();b=b.safeGet(e);c=d.shift();if(b.safeGet(c)&&(b.safeGet(c).isCollection!=null)){a=Backbone.ModelBinding.parseNestedTokens(b.safeGet(c),d);b=a.entity;c=a.attribute}return{entity:b,attribute:c}};Backbone.ModelBinding.nestedHandler={bind:function(a,b,c){return b.$(a).each(function(f,h){var g,e,d,i,j=this;i=h.id.split("-");if(i.length===1){e=c;g=_.first(i)}else{e=c.safeGet(i.shift());d=Backbone.ModelBinding.parseNestedTokens(e,i);e=d.entity;g=d.attribute}$(this).change(function(){if($(j).val()!==e.safeGet(g)){return e.setByName(g,$(j).val())}});e.bind("change:"+g,function(){if(e.safeGet(g)!==$(j).val()){return $(j).val(e.safeGet(g))}});return $(this).val(e.safeGet(g))})}};Backbone.ModelBinding.Conventions.text.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.password.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.radio.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.checkbox.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.select.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.textarea.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.number.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.range.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.tel.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.search.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.url.handler=Backbone.ModelBinding.nestedHandler;Backbone.ModelBinding.Conventions.email.handler=Backbone.ModelBinding.nestedHandler;